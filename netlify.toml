[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  SECRETS_SCAN_OMIT_KEYS = "GEMINI_API_KEY"
  NODE_VERSION = "20"
  NPM_FLAGS = "--production=false --legacy-peer-deps"
  NODE_OPTIONS = "--max-old-space-size=8192"
  SANITY_REVALIDATE_SECRET = "placeholder-for-build"
  GEMINI_API_KEY = "build-placeholder-key"
  NEXT_TELEMETRY_DISABLED = "1"
  # Performance optimizations
  NEXT_CACHE_SIZE = "1024"
  # Disable health check loop for production
  DISABLE_HEALTH_CHECKS = "true"

[[plugins]]
  package = "@netlify/plugin-nextjs"
